<head lang="en">

    <meta charset="UTF-8" />
    <link rel="stylesheet" href="js/plugins/wiki/tui_editor/data/tuidoc-example-style.css" />
    <!-- Editor -->
    <!-- Viewer -->
    <link rel="stylesheet" href="js/plugins/wiki/tui_editor/cdn/toastui-editor-viewer.css" />

    <!-- Chart -->
    <link rel="stylesheet" href="js/plugins/wiki/tui_chart/toastui-chart.css" />

    <!-- Color syntax -->
    <link
            rel="stylesheet"
            href="js/plugins/wiki/tui_color_picker/tui-color-picker.css"
    />
    <link
            rel="stylesheet"
            href="js/plugins/wiki/tui_editor/plugins/editor-plugin-color-syntax/cdn/toastui-editor-plugin-color-syntax.min.css"
    />
    <!-- Merged Table -->
    <link rel="stylesheet" href="js/plugins/wiki/tui_editor/plugins/editor-plugin-table-merged-cell/cdn/toastui-editor-plugin-table-merged-cell.min.css" />
    <!-- Code Highlight -->

    <link
            rel="stylesheet"
            href="js/plugins/wiki/tui_editor/plugins/editor-plugin-code-syntax-highlight/cdn/toastui-editor-plugin-code-syntax-highlight.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"  />
</head>


<div class="row">
    <div class="col-sm-12">
        <div class="container panel panel-default">
            <div class="panel-body">
                <div class="btn-group btn-group-xs pull-right">
                    <a class="btn btn-default" href="jsp/site/Portal.jsp?page=wiki&view=page&page_name=${topic.pageName}" title="#i18n{wiki.button.backToPage}">
                        <span class="glyphicon glyphicon-chevron-left"></span> #i18n{wiki.button.backToPage}
                    </a>
                    <a class="btn btn-default" href="jsp/site/Portal.jsp?page=wiki&view=modifyPage&page_name=${topic.pageName}" title="#i18n{wiki.button.backToEdit}">
                        <span class="glyphicon glyphicon-edit"></span> #i18n{wiki.button.backToEdit}
                    </a>
                </div>
            </div>

            <h1>${topic_title}</h1>
            <hr>
            <div  >
                ${result}
            </div>
        </div>
    </div>
</div>

<script defer>
    window.addEventListener("load", (event) => {
        if(document.getElementsByClassName('darkModeClassOn').length > 0){
            document.getElementById('darkModeSwitch').style.display = 'block';
        }
        let darkMode = localStorage.getItem('darkMode');
        let darkModeId = document.getElementById('darkModeId');
        let darkModeLabel = document.getElementById('darkModeLabel');
        if (darkMode === 'true') {
            darkModeId.checked = true;
            darkModeLabel.innerHTML = '<span class="fa fa-moon fa-2x"></span>';
            document.body.classList.add('darkmode');
        } else {
            darkModeId.checked = false;
            darkModeLabel.innerHTML = '<span class="fa fa-sun fa-2x"></span>';
            document.body.classList.remove('darkmode');
        }
    });


    window.addEventListener("load", (event) => {
        if(document.getElementsByClassName('darkModeClassOn').length > 0){
            document.getElementById('darkModeSwitch').style.display = 'block';
        }
        let darkMode = localStorage.getItem('darkMode');
        let darkModeId = document.getElementById('darkModeId');
        let darkModeLabel = document.getElementById('darkModeLabel');
        if (darkMode === 'true') {
            darkModeId.checked = true;
            darkModeLabel.innerHTML = '<span class="fa fa-moon fa-2x"></span>';
            document.body.classList.add('darkmode');
        } else {
            darkModeId.checked = false;
            darkModeLabel.innerHTML = '<span class="fa fa-sun fa-2x"></span>';
            document.body.classList.remove('darkmode');
        }
    });
    function toggleDarkMode() {
        let darkMode = localStorage.getItem('darkMode');
        let darkModeId = document.getElementById('darkModeId');
        let darkModeLabel = document.getElementById('darkModeLabel');
        if (darkMode === 'true') {
            darkModeId.checked = false;
            darkModeLabel.innerHTML = '<span class="fa fa-sun fa-2x"></span>';
            document.body.classList.remove('darkmode');
            localStorage.setItem('darkMode', 'false');
        } else {
            darkModeId.checked = true;
            darkModeLabel.innerHTML = '<span class="fa fa-moon fa-2x"></span>';
            document.body.classList.add('darkmode');
            localStorage.setItem('darkMode', 'true');
        }
    }
    window.addEventListener("load", (event) => {
        // on every tagName "PRE" add a copy button on the top right corner
        var pre = document.getElementsByTagName('pre');
        for (var i = 0; i < pre.length; i++) {
            var button = document.createElement('button');
            button.className = 'btn btn-primary btn-xs';
            button.style.float = 'right';
            button.style.marginTop = '10px';
            button.style.marginRight = '10px';
            button.textContent = 'Copy';
            button.onclick = function() {
                copyToClipboard(this.nextElementSibling.textContent);
            };
            pre[i].insertAdjacentElement('beforebegin', button)
        }
    });

    function copyToClipboard(text) {
        var dummy = document.createElement('textarea');
        document.body.appendChild(dummy);
        dummy.value = text;
        dummy.select();
        document.execCommand('copy');
        document.body.removeChild(dummy);
    }
</script>